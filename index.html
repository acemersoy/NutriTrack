<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NutriTrack - Saƒülƒ±klƒ± Ya≈üam Takibi</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="smooth-scroll.js" defer></script>
    <script src="swipe.js" defer></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* BODY - Material Design & WCAG */
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            transition: background 0.3s ease, color 0.3s ease;
        }

        [data-theme="dark"] body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: rgba(255, 255, 255, 0.87); /* WCAG: High emphasis */
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            font-weight: 300;
        }

        /* DASHBOARD GRID - Yeni Modern D√ºzen */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        /* Hero Card - √ñne √ßƒ±kan kart i√ßin */
        .dashboard-card.hero {
            grid-column: span 2;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.95), rgba(118, 75, 162, 0.95));
            color: white;
        }

        .dashboard-card.hero .card-icon {
            color: white;
            font-size: 3rem;
        }

        .dashboard-card.hero .card-title {
            color: white;
            font-size: 1.8rem;
        }

        .dashboard-card.hero .card-description {
            color: rgba(255, 255, 255, 0.87);
        }

        .dashboard-card.hero .card-button {
            background: white;
            color: #667eea;
            font-weight: 600;
            padding: 15px 35px;
            font-size: 1.1rem;
        }

        .dashboard-card.hero .card-button:hover {
            background: #f8f9fa;
            transform: translateY(-2px) scale(1.05);
        }

        [data-theme="dark"] .dashboard-card.hero {
            background: linear-gradient(135deg, rgba(102, 126, 234, 1), rgba(118, 75, 162, 1));
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
        }

        /* Quick Actions Grid */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .quick-action-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .quick-action-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.12);
        }

        [data-theme="dark"] .quick-action-card {
            background: rgba(30, 30, 40, 0.95);
            border: 1px solid rgba(80, 80, 100, 0.3);
        }

        .quick-action-icon {
            font-size: 2.5rem;
            color: #667eea;
            transition: transform 0.3s ease;
        }

        [data-theme="dark"] .quick-action-icon {
            color: #A0B4FF;
        }

        .quick-action-card:hover .quick-action-icon {
            transform: scale(1.1);
        }

        .quick-action-content {
            flex: 1;
        }

        .quick-action-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: #1a1a1a;
        }

        [data-theme="dark"] .quick-action-title {
            color: rgba(255, 255, 255, 0.87);
        }

        .quick-action-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #667eea;
        }

        [data-theme="dark"] .quick-action-value {
            color: #A0B4FF;
        }

        .quick-action-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .quick-action-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        [data-theme="dark"] .quick-action-btn {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.9), rgba(118, 75, 162, 0.9));
        }

        /* DASHBOARD CARD - Material Design & WCAG */
        .dashboard-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        [data-theme="dark"] .dashboard-card {
            background: rgba(30, 30, 40, 0.95); /* Material Design: Surface */
            border: 1px solid rgba(80, 80, 100, 0.3);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        [data-theme="dark"] .dashboard-card:hover {
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.7);
            border-color: rgba(102, 126, 234, 0.5);
        }

        .dashboard-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }

        [data-theme="dark"] .dashboard-card::before {
            background: linear-gradient(90deg, rgba(102, 126, 234, 0.9), rgba(118, 75, 162, 0.9));
        }

        .card-icon {
            font-size: 2.5rem;
            color: #667eea;
            margin-bottom: 20px;
            display: block;
            transition: color 0.3s ease;
        }

        [data-theme="dark"] .card-icon {
            color: #A0B4FF;
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #1a1a1a;
            transition: color 0.3s ease;
        }

        [data-theme="dark"] .card-title {
            color: rgba(255, 255, 255, 0.87); /* WCAG: High emphasis */
        }

        .card-description {
            color: #4a4a4a;
            line-height: 1.6;
            margin-bottom: 20px;
            transition: color 0.3s ease;
        }

        [data-theme="dark"] .card-description {
            color: rgba(255, 255, 255, 0.60); /* Material Design: Medium emphasis */
        }

        /* CARD BUTTON - Material Design & WCAG */
        .card-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .card-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .card-button:active {
            transform: translateY(0);
        }

        [data-theme="dark"] .card-button {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.9), rgba(118, 75, 162, 0.9));
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        [data-theme="dark"] .card-button:hover {
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        /* STAT CARD - Material Design & WCAG */
        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-3px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        }

        [data-theme="dark"] .stat-card {
            background: rgba(255, 255, 255, 0.08); /* Material Design: Elevated Surface */
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        [data-theme="dark"] .stat-card:hover {
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            display: block;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* NAVIGATION - Material Design & WCAG */
        /* Navigation stilleri styles.css'de tanƒ±mlƒ± */

        .progress-ring {
            width: 120px;
            height: 120px;
            margin: 20px auto;
        }

        /* PROGRESS RING - Material Design & WCAG */
        .progress-ring-circle {
            stroke: #e6e6e6;
            stroke-width: 8;
            fill: transparent;
            transition: stroke 0.3s ease;
        }

        [data-theme="dark"] .progress-ring-circle {
            stroke: rgba(80, 80, 100, 0.4);
        }

        .progress-ring-progress {
            stroke: #667eea;
            stroke-width: 8;
            fill: transparent;
            stroke-dasharray: 326.73;
            stroke-dashoffset: 326.73;
            transform: rotate(-90deg);
            transform-origin: 60px 60px;
            transition: stroke-dashoffset 0.5s ease-in-out, stroke 0.3s ease;
        }

        [data-theme="dark"] .progress-ring-progress {
            stroke: #A0B4FF;
        }

        .calorie-counter {
            text-align: center;
            margin-top: 20px;
        }

        .calorie-amount {
            font-size: 2rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 5px;
            transition: color 0.3s ease;
        }

        [data-theme="dark"] .calorie-amount {
            color: #A0B4FF;
        }

        .calorie-label {
            color: #666;
            font-size: 0.9rem;
            transition: color 0.3s ease;
        }

        [data-theme="dark"] .calorie-label {
            color: rgba(255, 255, 255, 0.60); /* Material Design: Medium emphasis */
        }

        /* RESPONSIVE DESIGN - Mobile First */
        @media (max-width: 1024px) {
            .dashboard-card.hero {
                grid-column: span 1; /* Tablet'te tek kolon */
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .header p {
                font-size: 1rem;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .dashboard-card.hero {
                grid-column: span 1;
                padding: 25px;
            }

            .dashboard-card.hero .card-icon {
                font-size: 2.5rem;
            }

            .dashboard-card.hero .card-title {
                font-size: 1.5rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .quick-actions {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .dashboard-card {
                padding: 20px;
            }

            .card-icon {
                font-size: 2rem;
            }

            .card-title {
                font-size: 1.3rem;
            }
            
            /* Navigation mobil stilleri styles.css'de tanƒ±mlƒ± */

            .progress-ring {
                width: 100px;
                height: 100px;
            }

            .calorie-amount {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.8rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .stat-card {
                padding: 15px;
            }

            .stat-number {
                font-size: 1.5rem;
            }

            .dashboard-card.hero {
                padding: 20px;
            }

            .dashboard-card.hero .card-button {
                width: 100%;
                padding: 12px 20px;
            }

            .dashboard-card {
                padding: 20px;
            }

            .card-button {
                width: 100%;
                text-align: center;
            }

            .quick-action-card {
                flex-direction: column;
                text-align: center;
            }

            .quick-action-btn {
                width: 100%;
            }

            /* Navigation k√º√ß√ºk mobil stilleri styles.css'de tanƒ±mlƒ± */
        }

        /* ADDITIONAL DARK MODE ELEMENTS */
        #goalProgress,
        #periodStatus {
            color: #4a4a4a;
            transition: color 0.3s ease;
        }

        [data-theme="dark"] #goalProgress,
        [data-theme="dark"] #periodStatus {
            color: rgba(255, 255, 255, 0.87); /* WCAG: High emphasis */
        }

        /* SCROLLBAR - Material Design */
        .container::-webkit-scrollbar {
            width: 8px;
        }

        .container::-webkit-scrollbar-track {
            background: transparent;
        }

        .container::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }

        .container::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()" title="Tema Deƒüi≈ütir">
        <i class="fas fa-moon" id="themeIcon"></i>
    </button>

    <div class="container">
        <div class="header">
            <h1><i class="fas fa-leaf"></i> NutriTrack</h1>
            <p>Ki≈üisel saƒülƒ±k ve beslenme takip uygulamanƒ±z</p>
        </div>

        <!-- Stats Grid - G√ºnl√ºk √ñzet -->
        <div class="stats-grid">
            <div class="stat-card">
                <span class="stat-number" id="todayCalories">0</span>
                <span class="stat-label">G√ºnl√ºk Kalori</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="todayWater">0</span>
                <span class="stat-label">Su (bardak)</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="streakDays">0</span>
                <span class="stat-label">G√ºn Sayƒ±sƒ±</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="bmrValue">0</span>
                <span class="stat-label">BMR (kcal)</span>
            </div>
        </div>

        <!-- Hero Card - Besin Takibi (√ñne √áƒ±kan) -->
        <div class="dashboard-grid">
            <div class="dashboard-card hero">
                <i class="fas fa-utensils card-icon"></i>
                <h3 class="card-title">Bug√ºn Ne Yediniz?</h3>
                <p class="card-description">USDA veritabanƒ± ile 300.000+ yiyecek arasƒ±ndan arama yapƒ±n. Mikro besinleri dahil detaylƒ± analiz alƒ±n.</p>
                <div class="calorie-counter">
                    <div class="progress-ring">
                        <svg width="120" height="120">
                            <circle class="progress-ring-circle" cx="60" cy="60" r="52"></circle>
                            <circle class="progress-ring-progress" id="calorieProgress" cx="60" cy="60" r="52"></circle>
                        </svg>
                        <div class="calorie-amount" id="consumedCalories">0</div>
                        <div class="calorie-label">/ <span id="targetCalories">2000</span> kcal</div>
                    </div>
                </div>
                <a href="nutrition.html" class="card-button"><i class="fas fa-plus-circle"></i> Besin Ekle</a>
            </div>
        </div>

        <!-- Quick Actions - Hƒ±zlƒ± Eri≈üim -->
        <div class="quick-actions">
            <div class="quick-action-card">
                <i class="fas fa-tint quick-action-icon"></i>
                <div class="quick-action-content">
                    <div class="quick-action-title">Su Takibi</div>
                    <div class="quick-action-value"><span id="consumedWater">0</span> / 8 bardak</div>
                </div>
                <button class="quick-action-btn" onclick="addWater()"><i class="fas fa-plus"></i> Ekle</button>
            </div>

            <div class="quick-action-card" id="periodQuickCard">
                <i class="fas fa-calendar-alt quick-action-icon"></i>
                <div class="quick-action-content">
                    <div class="quick-action-title">Adet Takibi</div>
                    <div class="quick-action-value" id="periodStatusQuick">Sonraki: -- g√ºn</div>
                </div>
                <button class="quick-action-btn" onclick="trackPeriod()"><i class="fas fa-check"></i> Kaydet</button>
            </div>

            <div class="quick-action-card">
                <i class="fas fa-chart-line quick-action-icon"></i>
                <div class="quick-action-content">
                    <div class="quick-action-title">Hedef</div>
                    <div class="quick-action-value" id="goalProgressQuick">Belirlenmemi≈ü</div>
                </div>
                <a href="profile.html" class="quick-action-btn" style="text-decoration: none; display: inline-flex; align-items: center; gap: 5px;"><i class="fas fa-cog"></i> Ayarla</a>
            </div>
        </div>

        <!-- Secondary Cards - Detaylƒ± Bilgi -->
        <div class="dashboard-grid">
            <div class="dashboard-card">
                <i class="fas fa-book card-icon"></i>
                <h3 class="card-title">Tariflerim</h3>
                <p class="card-description">Kendi yemeklerinizi olu≈üturun, malzemeleri ekleyin ve tek tƒ±kla g√ºnl√ºk beslenmelerinize dahil edin.</p>
                <div class="calorie-counter">
                    <div style="font-size: 1.2rem; color: #667eea; margin: 20px 0;">
                        <div style="margin-bottom: 10px;"><i class="fas fa-utensils"></i> Kayƒ±tlƒ±: <span id="recipeCount">0</span> tarif</div>
                        <div><i class="fas fa-clock"></i> Hƒ±zlƒ± ekleme</div>
                    </div>
                </div>
                <a href="recipes.html" class="card-button"><i class="fas fa-plus-circle"></i> Tarif Olu≈ütur</a>
            </div>

            <div class="dashboard-card">
                <i class="fas fa-flask card-icon"></i>
                <h3 class="card-title">Mikro Besinler</h3>
                <p class="card-description">25+ vitamin ve mineral takibi. G√ºnl√ºk √∂nerilen deƒüerlere g√∂re besin alƒ±mƒ±nƒ±zƒ± optimize edin.</p>
                <div id="micronutrientSummary" style="margin: 20px 0;">
                    <div style="text-align: center; color: #666; font-size: 0.9rem;">Besin ekledik√ße burada g√∂r√ºnecek</div>
                </div>
                <a href="nutrition.html" class="card-button"><i class="fas fa-chart-bar"></i> Detaylƒ± G√∂r√ºn√ºm</a>
            </div>

            <div class="dashboard-card">
                <i class="fas fa-trophy card-icon"></i>
                <h3 class="card-title">Ba≈üarƒ±mlar & ƒ∞lerleme</h3>
                <p class="card-description">Haftalƒ±k ve aylƒ±k ilerlemenizi izleyin, ba≈üarƒ±m rozetleri kazanƒ±n ve hedeflerinize ula≈üƒ±n.</p>
                <div class="calorie-counter">
                    <div style="font-size: 1.2rem; color: #667eea; margin: 20px 0;">
                        <div style="margin-bottom: 10px;"><i class="fas fa-fire"></i> Toplam: <span id="totalCaloriesDisplay">0</span> kcal</div>
                        <div><i class="fas fa-calendar-check"></i> G√ºn: <span id="streakDaysDisplay">0</span></div>
                    </div>
                </div>
                <a href="progress.html" class="card-button"><i class="fas fa-chart-line"></i> Raporlarƒ± G√∂r</a>
            </div>
        </div>
    </div>

    <nav class="navigation">
        <a href="index.html" class="nav-item active" title="Ana Sayfa"><i class="fas fa-home"></i></a>
        <a href="nutrition.html" class="nav-item" title="Besin Takibi"><i class="fas fa-utensils"></i></a>
        <a href="recipes.html" class="nav-item" title="Tariflerim"><i class="fas fa-book"></i></a>
        <a href="profile.html" class="nav-item" title="Profil"><i class="fas fa-user"></i></a>
        <a href="progress.html" class="nav-item" title="ƒ∞lerleme"><i class="fas fa-chart-bar"></i></a>
    </nav>

    <script>
        // LocalStorage'dan verileri y√ºkle
        function loadUserData() {
            const userData = JSON.parse(localStorage.getItem('nutritrack_user') || '{}');
            const todayData = JSON.parse(localStorage.getItem('nutritrack_today') || '{}');
            
            // BMR hesapla
            if (userData.weight && userData.height && userData.age && userData.gender) {
                let bmr;
                if (userData.gender === 'male') {
                    bmr = 88.362 + (13.397 * userData.weight) + (4.799 * userData.height) - (5.677 * userData.age);
                } else {
                    bmr = 447.593 + (9.247 * userData.weight) + (3.098 * userData.height) - (4.677 * userData.age);
                }
                
                // Hedefe g√∂re kalori ayarla
                let targetCalories = bmr;
                if (userData.goal === 'lose') {
                    targetCalories = bmr - 500; // Kilo vermek i√ßin 500 kcal eksik
                } else if (userData.goal === 'gain') {
                    targetCalories = bmr + 500; // Kilo almak i√ßin 500 kcal fazla
                } else if (userData.goal === 'muscle') {
                    targetCalories = bmr + 300; // Kas kazanmak i√ßin 300 kcal fazla
                }
                
                document.getElementById('bmrValue').textContent = Math.round(bmr);
                document.getElementById('targetCalories').textContent = Math.round(targetCalories);
                
                // Kalori ilerlemesini g√ºncelle
                const consumed = todayData.calories || 0;
                const target = Math.round(targetCalories);
                const percentage = Math.min((consumed / target) * 100, 100);
                
                document.getElementById('consumedCalories').textContent = consumed;
                document.getElementById('todayCalories').textContent = consumed;
                
                const progressCircle = document.getElementById('calorieProgress');
                const circumference = 2 * Math.PI * 52;
                const offset = circumference - (percentage / 100) * circumference;
                progressCircle.style.strokeDashoffset = offset;
            }
            
            // Su takibi
            const waterConsumed = todayData.water || 0;
            const waterTarget = 8;
            const waterPercentage = Math.min((waterConsumed / waterTarget) * 100, 100);
            
            document.getElementById('consumedWater').textContent = waterConsumed;
            document.getElementById('todayWater').textContent = waterConsumed;
            
            const waterProgressCircle = document.getElementById('waterProgress');
            const waterCircumference = 2 * Math.PI * 52;
            const waterOffset = waterCircumference - (waterPercentage / 100) * waterCircumference;
            waterProgressCircle.style.strokeDashoffset = waterOffset;
            
            // Streak g√ºn sayƒ±sƒ±
            const startDate = userData.startDate ? new Date(userData.startDate) : new Date();
            const today = new Date();
            const diffTime = Math.abs(today - startDate);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            document.getElementById('streakDays').textContent = diffDays;
            
            // Yeni elementleri de g√ºncelle
            if (document.getElementById('streakDaysDisplay')) {
                document.getElementById('streakDaysDisplay').textContent = diffDays;
            }
            if (document.getElementById('totalCaloriesDisplay')) {
                document.getElementById('totalCaloriesDisplay').textContent = todayData.calories || 0;
            }
            
            // Tarif sayƒ±sƒ±nƒ± g√ºncelle
            const recipes = JSON.parse(localStorage.getItem('nutritrack_recipes') || '[]');
            if (document.getElementById('recipeCount')) {
                document.getElementById('recipeCount').textContent = recipes.length;
            }
            
            // Hedef durumu
            const goalText = {
                'lose': 'Kilo Verme',
                'gain': 'Kilo Alma',
                'maintain': 'Kilo Koruma',
                'muscle': 'Kas Kazanma'
            };
            const goalLabel = goalText[userData.goal] || 'Belirlenmemi≈ü';
            
            // Yeni quick action card i√ßin
            if (document.getElementById('goalProgressQuick')) {
                document.getElementById('goalProgressQuick').textContent = goalLabel;
            }
            
            // Adet takibi - sadece kadƒ±nlar i√ßin g√∂ster
            const periodQuickCard = document.getElementById('periodQuickCard');
            if (userData.gender === 'female') {
                if (periodQuickCard) periodQuickCard.style.display = 'flex';
                
                if (userData.lastPeriod) {
                    const lastPeriodDate = new Date(userData.lastPeriod);
                    const cycleLength = userData.cycleLength || 28;
                    const nextPeriod = new Date(lastPeriodDate);
                    nextPeriod.setDate(nextPeriod.getDate() + cycleLength);
                    
                    const daysUntil = Math.ceil((nextPeriod - today) / (1000 * 60 * 60 * 24));
                    if (document.getElementById('periodStatusQuick')) {
                        document.getElementById('periodStatusQuick').textContent = `${daysUntil} g√ºn kaldƒ±`;
                    }
                }
            } else {
                if (periodQuickCard) periodQuickCard.style.display = 'none';
            }
        }

        // Su ekleme fonksiyonu
        function addWater() {
            let todayData = JSON.parse(localStorage.getItem('nutritrack_today') || '{}');
            todayData.water = (todayData.water || 0) + 1;
            localStorage.setItem('nutritrack_today', JSON.stringify(todayData));
            loadUserData();
            
            // Animasyonlu geri bildirim
            showNotification('Bir bardak su eklendi! üíß');
        }

        // Adet takibi fonksiyonu
        function trackPeriod() {
            const today = new Date().toISOString().split('T')[0];
            let userData = JSON.parse(localStorage.getItem('nutritrack_user') || '{}');
            userData.lastPeriod = today;
            localStorage.setItem('nutritrack_user', JSON.stringify(userData));
            loadUserData();
            showNotification('Adet takibi g√ºncellendi! üå∏');
        }

        // Bildirim g√∂sterme fonksiyonu
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #667eea;
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                z-index: 10000;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }

        // Animasyon stilleri (index.html i√ßin)
        const indexAnimStyle = document.createElement('style');
        indexAnimStyle.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(indexAnimStyle);

        // Tema y√∂netimi
        function initTheme() {
            const savedTheme = localStorage.getItem('nutritrack_theme') || 'light';
            setTheme(savedTheme);
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            setTheme(newTheme);
        }

        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('nutritrack_theme', theme);
            
            const themeIcon = document.getElementById('themeIcon');
            if (themeIcon) {
                themeIcon.className = theme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
            }
            
            // Mikro besin √∂zetini tema deƒüi≈üikliƒüinde g√ºncelle
            if (typeof updateMicronutrientSummary === 'function') {
                updateMicronutrientSummary();
            }
        }

        // Mikro besin √∂zetini g√∂ster
        function updateMicronutrientSummary() {
            const summaryDiv = document.getElementById('micronutrientSummary');
            if (!summaryDiv) return;
            
            const isDarkMode = document.documentElement.getAttribute('data-theme') === 'dark';
            const emptyColor = isDarkMode ? 'rgba(255, 255, 255, 0.60)' : '#666';
            
            if (typeof app === 'undefined') {
                summaryDiv.innerHTML = `<div style="text-align: center; color: ${emptyColor}; font-size: 0.9rem;">Besin ekledik√ße burada g√∂r√ºnecek</div>`;
                return;
            }
            
            const micronutrients = app.calculateDailyMicronutrients();
            
            if (!micronutrients || micronutrients.length === 0) {
                summaryDiv.innerHTML = `<div style="text-align: center; color: ${emptyColor}; font-size: 0.9rem;">Besin ekledik√ße burada g√∂r√ºnecek</div>`;
                return;
            }
            
            // ƒ∞statistikler
            const complete = micronutrients.filter(n => n.percentage >= 100 && !n.isLimit).length;
            const low = micronutrients.filter(n => n.percentage < 70 && !n.isLimit).length;
            const total = micronutrients.filter(n => !n.isLimit).length;
            
            // En eksik 3 besin
            const deficient = micronutrients
                .filter(n => !n.isLimit && n.percentage < 100)
                .sort((a, b) => a.percentage - b.percentage)
                .slice(0, 3);
            
            // Dark mode uyumlu renkler
            const colors = {
                primary: isDarkMode ? '#A0B4FF' : '#667eea',
                warning: isDarkMode ? '#FFA500' : '#f39c12',
                success: isDarkMode ? '#4CAF50' : '#27ae60',
                text: isDarkMode ? 'rgba(255, 255, 255, 0.60)' : '#666',
                alertBg: isDarkMode ? 'rgba(255, 140, 0, 0.15)' : 'rgba(255, 71, 87, 0.1)',
                alertBorder: isDarkMode ? '#FFA500' : '#ff4757',
                alertText: isDarkMode ? '#FFB84D' : '#ff4757'
            };
            
            let html = `
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 15px;">
                    <div style="text-align: center;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: ${colors.primary};">${complete}</div>
                        <div style="font-size: 0.8rem; color: ${colors.text};">Tamamlandƒ±</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: ${colors.warning};">${low}</div>
                        <div style="font-size: 0.8rem; color: ${colors.text};">D√º≈ü√ºk</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: ${colors.success};">${Math.round((complete/total)*100)}%</div>
                        <div style="font-size: 0.8rem; color: ${colors.text};">Ba≈üarƒ±</div>
                    </div>
                </div>
            `;
            
            if (deficient.length > 0) {
                html += `<div style="margin-top: 10px; padding: 10px; background: ${colors.alertBg}; border-radius: 8px; border-left: 3px solid ${colors.alertBorder};">`;
                html += `<div style="font-size: 0.85rem; font-weight: 600; margin-bottom: 5px; color: ${colors.alertText};">‚ö†Ô∏è En Eksik Besinler:</div>`;
                deficient.forEach(n => {
                    html += `<div style="font-size: 0.75rem; color: ${colors.text}; margin: 3px 0;">‚Ä¢ ${n.name}: %${Math.round(n.percentage)}</div>`;
                });
                html += '</div>';
            }
            
            summaryDiv.innerHTML = html;
        }

        // Sayfa y√ºklendiƒüinde verileri y√ºkle
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
            loadUserData();
            updateMicronutrientSummary(); // Mikro besin √∂zetini g√ºncelle
            
            // Eƒüer kullanƒ±cƒ± verisi yoksa, profile y√∂nlendir
            const userData = JSON.parse(localStorage.getItem('nutritrack_user') || '{}');
            if (!userData.weight || !userData.height || !userData.age || !userData.gender) {
                setTimeout(() => {
                    if (confirm('Profil bilgilerinizi tamamlamak ister misiniz?')) {
                        window.location.href = 'profile.html';
                    }
                }, 1000);
            }
        });

        // Her g√ºn ba≈üƒ±nda verileri sƒ±fƒ±rla
        function checkDailyReset() {
            const today = new Date().toDateString();
            const lastReset = localStorage.getItem('nutritrack_last_reset');
            
            if (lastReset !== today) {
                // √ñnceki g√ºn√ºn verilerini ge√ßmi≈üe kaydet
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
                const yesterdayStr = yesterday.toISOString().split('T')[0];
                
                const previousDayData = JSON.parse(localStorage.getItem('nutritrack_today') || '{}');
                if (previousDayData.foods && previousDayData.foods.length > 0) {
                    let historyData = JSON.parse(localStorage.getItem('nutritrack_history') || '{}');
                    historyData[yesterdayStr] = {
                        foods: previousDayData.foods,
                        calories: previousDayData.calories || 0,
                        water: previousDayData.water || 0
                    };
                    localStorage.setItem('nutritrack_history', JSON.stringify(historyData));
                }
                
                // Bug√ºnk√º verileri sƒ±fƒ±rla
                localStorage.setItem('nutritrack_today', JSON.stringify({
                    calories: 0,
                    water: 0,
                    foods: []
                }));
                localStorage.setItem('nutritrack_last_reset', today);
                loadUserData();
            }
        }

        // Sayfa her a√ßƒ±ldƒ±ƒüƒ±nda g√ºnl√ºk kontrol√º yap
        window.addEventListener('focus', checkDailyReset);
        checkDailyReset();
    </script>
</body>
</html>